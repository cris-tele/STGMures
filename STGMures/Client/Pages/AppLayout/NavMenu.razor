@inject ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager NavigationManager

<MudNavMenu Dense="true">
    <MudNavLink Href="/" Match="NavLinkMatch.All">Home</MudNavLink>
    <AuthorizeView>
        <Authorized>
            <MudNavLink Href="PatientsList"             Match="NavLinkMatch.Prefix">Pacienti</MudNavLink>
            <MudNavLink Href="PatientFilePage"          Match="NavLinkMatch.Prefix">Fisa Pacient</MudNavLink>
            <MudNavLink Href="PatientAssocDiseasePage"  Match="NavLinkMatch.Prefix">Boli Asociate</MudNavLink> <!--<span class="oi oi-eyedropper"></span>-->
            <MudNavLink Href="PatientSurgeryPage"       Match="NavLinkMatch.Prefix">Operatii pacient</MudNavLink> <!--<span class="oi oi-eyedropper"></span>-->
            <MudNavLink Href="SurgeryAnesthesiaPage"    Match="NavLinkMatch.Prefix">Anestezii</MudNavLink> <!--<span class="oi oi-eyedropper"></span>-->
            <MudNavLink Href="PatientTreatmentPage" Match="NavLinkMatch.Prefix">Tratament</MudNavLink> <!--<span class="oi oi-eyedropper"></span>-->
            
            <MudNavGroup Title="Setari" Expanded="false" >

                <MudNavGroup Title="Tipuri" Expanded="false">
                    <MudNavLink Href="DiagnosticTypes" Match="NavLinkMatch.Prefix">Diagnostice </MudNavLink>
                    <MudNavLink Href="TreatmentsTypes" Match="NavLinkMatch.Prefix">Tratamente</MudNavLink>
                    <MudNavLink Href="ConsumableTypes" Match="NavLinkMatch.Prefix">Consumabile</MudNavLink>
                </MudNavGroup>

                <MudNavGroup Title="Categorii" Expanded="false">
                    <MudNavLink Href="DiagnosticCategories" Match="NavLinkMatch.Prefix">Diagnostice</MudNavLink>
                    <MudNavLink Href="treatmentcategory" Match="NavLinkMatch.Prefix">Tratamente</MudNavLink>
                    <MudNavLink Href="consumablecategory" Match="NavLinkMatch.Prefix">Consumabile</MudNavLink>
                    <MudNavLink Href="SurgicalProcedures" Match="NavLinkMatch.Prefix">Proceduri Chirurgicale</MudNavLink>
                </MudNavGroup>
            </MudNavGroup>

            <MudDivider DividerType="DividerType.Middle" /> <!--Separator-->
            <MudNavLink OnClick="@(() =>Logout())">Logout</MudNavLink>

        </Authorized>
        <NotAuthorized>
            <MudNavLink href="register" title="Inregistrare utilizator"><span class="oi oi-pencil"></span> </MudNavLink>
        </NotAuthorized>
    </AuthorizeView>
</MudNavMenu>


@code {
    private async void Logout()
    {
        await LocalStorage.RemoveItemAsync("authToken");
        await AuthStateProvider.GetAuthenticationStateAsync();
        NavigationManager.NavigateTo("/");
    }
   
}
